!function(){"use strict";function t(t,n){return{x:t||0,y:n||0}}const n=(t,n)=>(t.x=n.x,t.y=n.y,t),e=(t,n,e)=>(t.x=n,t.y=e,t),o=(t,n,e)=>(t.x=n.x+e.x,t.y=n.y+e.y,t),s=(t,n,e)=>(t.x=n.x-e.x,t.y=n.y-e.y,t),c=(t,n)=>t.x*n.x+t.y*n.y,i=(t,n,e)=>(t.x=n.x*e,t.y=n.y*e,t),r=(t,n)=>{const e=t.x-n.x,o=t.y-n.y;return Math.sqrt(e*e+o*o)},a=t=>{const n=t.x,e=t.y;return Math.sqrt(n*n+e*e)},l=(t,n)=>{const e=n.x,o=n.y;let s=e*e+o*o;return s>0&&(s=1/Math.sqrt(s),t.x=n.x*s,t.y=n.y*s),t},u=(t,...n)=>{for(let e=0;e<n.length;e++){const s=n[e];o(s,s,t)}},h=(t,n)=>{t.t.x+=t.o.x*n*n*.001,t.t.y+=t.o.y*n*n*.001,e(t.o,0,0)},p={x:0,y:0},f={x:0,y:0},w={x:0,y:0},d={x:0,y:0},g=(t,n,c,i,r,a,l,u)=>{const h=((t,n)=>{const e=t.x-n.x,o=t.y-n.y;return e*e+o*o})(t.t,i.t),g=n+r;s(p,t.t,t.i),s(f,i.t,i.i),s(w,t.t,i.t);const v=Math.sqrt(h);let M=(v-g)/v;0===v&&(M=1);const y=c>0?c:1,x=a>0?a:1,b=y+x;if(d.x=w.x*M*(x/b),d.y=w.y*M*(x/b),c>0&&s(t.t,t.t,d),d.x=w.x*M*(y/b),d.y=w.y*M*(y/b),a>0&&o(i.t,i.t,d),!l)return;const m=(u=u||1)*(w.x*p.x+w.y*p.y)/(h||1),k=u*(w.x*f.x+w.y*f.y)/(h||1);p.x+=(k*w.x-m*w.x)/(y||1),f.x+=(m*w.x-k*w.x)/(x||1),p.y+=(k*w.y-m*w.y)/(y||1),f.y+=(m*w.y-k*w.y)/(x||1),c>0&&e(t.i,t.t.x-p.x,t.t.y-p.y),a>0&&e(i.i,i.t.x-f.x,i.t.y-f.y)},v=t(),M=t(),y=t(),x=t();function b(e,a,u,h,p,f,w,d,b){s(M,f.t,h.t),l(v,M),s(y,e.t,h.t);const m=c(M,y),k=c(M,M),T=Math.sqrt(k);if(m<0||m>k)return;const E=m/k,L=1-E;i(x,v,E*T),o(x,x,h.t);if(r(x,e.t)>a)return;const S=L*u,A=E*u,H={t:t(),i:t()},P={t:t(),i:t()};i(H.t,v,E*T),s(H.t,e.t,H.t),i(H.i,v,E*T),s(H.i,e.i,H.i),i(P.t,v,L*T),o(P.t,e.t,P.t),i(P.i,v,L*T),o(P.i,e.i,P.i);const $={t:t(),i:t()},j={t:t(),i:t()};n($.t,H.t),n($.i,H.i),n(j.t,P.t),n(j.i,P.i);g(H,a,S,h,0,p,d,b),g(P,a,A,f,0,w,d,b);const C={t:t(),i:t()},D={t:t(),i:t()};s(C.t,H.t,$.t),s(D.t,P.t,j.t),i(C.t,C.t,L),i(D.t,D.t,E),o(e.t,e.t,C.t),o(e.t,e.t,D.t),d&&(s(C.i,H.i,$.i),s(D.i,P.i,j.i),i(C.i,C.i,L),i(D.i,D.i,E),o(e.i,e.i,C.i),o(e.i,e.i,D.i))}const m=t(),k=t(),T=t(),E=t(),L=t(),S=t(),A=t(),H=t(),P=t(),$=t(),j=t(),C=t(),D=t(),F=t(),G=t=>{const n=2*t.t.x-t.i.x,o=2*t.t.y-t.i.y;e(t.i,t.t.x,t.t.y),e(t.t,n,o)},I=t(),N=t();function O(t,n,e,o,c){s(I,n,t),s(N,o,e);const i=(-I.y*(t.x-e.x)+I.x*(t.y-e.y))/(-N.x*I.y+I.x*N.y),r=(N.x*(t.y-e.y)-N.y*(t.x-e.x))/(-N.x*I.y+I.x*N.y);return i>=0&&i<=1&&r>=0&&r<=1&&(c.x=t.x+r*I.x,c.y=t.y+r*I.y,!0)}const R=t(),W=t(),z=t(),Z=t(),q=t(),B=t();const J=t(),K=t();function Q(t,n,o,i){if(s(J,o,n),0===J.x&&0===J.y)throw new Error("ZeroLengthEdge");const a=((t.x-n.x)*J.x+(t.y-n.y)*J.y)/(J.x*J.x+J.y*J.y);i.l=a;const u=e(i.u,n.x+a*J.x,n.y+a*J.y);i.h=r(u,t);const h=((t,n,e)=>(t.y=e.x-n.x,t.x=n.y-e.y,l(t,t)))(i.p,n,o);s(K,t,u),i.g=c(h,K)}function U(t){return t&&"object"==typeof t&&"number"==typeof t.id}class V{constructor(t){this.v=t,this.M=V.hash(this.v),this.m=new Set}k(t){this.m.add(t)}T(t,n){const e=n.map(t=>t.L);this.v.every(t=>e.indexOf(t)>-1)&&!this.m.has(t)&&this.m.add(t)}S(t,n){const e=n.map(t=>t.L);this.v.every(t=>e.indexOf(t)>-1)&&this.m.has(t)&&this.m.delete(t)}static hash(t){return t.slice().sort().join("|")}}const X=33.3333333,Y=new class{constructor(){this.A=1,this.m=new Map,this.H=new Map,this.P=new Set}$(t){const n={id:this.A++};return this.m.set(n,t),this.H.forEach(e=>e.T(n,t)),n}j(t){this.P.add(t)}C(t){return this.P.has(t)}D(){if(0===this.P.size)return;let t=!1;const n=e=>{e&&"object"==typeof e&&!U(e)&&Object.values(e).forEach(e=>{U(e)?(this.j(e),t=!0):n(e)})};this.P.forEach(t=>{if(this.P.delete(t),!this.m.has(t))return;const e=this.m.get(t);e.forEach(t=>{n(t)}),this.m.delete(t),this.H.forEach(n=>n.S(t,e))}),t&&this.D()}select(t){const n=V.hash(t);if(this.H.has(n))return this.H.get(n).m;const e=new V(t);return this.H.set(e.M,e),this.m.forEach((n,o)=>{let s=!0;for(let e=0;e<t.length;e++){const o=t[e];n.find(t=>t.L===o)||(s=!1)}s&&e.k(o)}),e.m}F(t){return this.select(t).values().next().value}data(t,n){const e=this.m.get(t);if(!e)throw new Error(`Entity(${t}) not found!`);let o;for(let t=0;t<e.length;t++){const s=e[t];s.L===n&&(o=s)}if(!o)throw new Error(`Data(${n}) not found for Entity(${t})!`);return o}G(t){const n=this.F([t]);if(!n)return;return this.data(n,t)}};function _(){return Y}const tt=document.querySelector.bind(document),nt=tt("#r"),et=tt("#c"),ot=tt("#u");if(!nt||!et||!ot)throw new Error("Could not locate DOM!");function st(t,n,e,o){return t.addEventListener(n,e,o),()=>{t.removeEventListener(n,e,o)}}function ct(n=0,e=0){return t(n,e)}function it(t){const n=_().G("vp"),e=n.I;return t/n.N*e.width}function rt(t,n){const e=_().G("vp"),{O:o}=e;return it(t-("x"===n?o.target.x:o.target.y))}const at=t=>t/_().G("vp").I.width*100;function lt(){const t=_().G("vp"),{R:n}=t.I;n.save(),function(t){const{R:n}=t.I,{O:e}=t;n.scale(1,-1),n.translate(-it(e.W.x),-it(e.W.y))}(t),n.clearRect(0,0,t.I.Z.width,t.I.Z.height),n.restore()}function ut(t,n,e,s,c){const i=_().G("vp"),{O:r}=i,a=ct();return a.x=r.target.x-r.W.x,a.y=r.target.y+r.W.y,o(a,a,n),ht(t,a,e,s,c)}function ht(t,n,e,o,s,c="transparent"){const i=_().G("vp"),{O:r}=i,{R:a}=i.I;a.save(),a.scale(1,-1);const{q:l,font:u}=pt(t,o);let h=0,p=it(-n.y+r.target.y);return a.font=u,t.split("\n").forEach((t,o)=>{const i=a.measureText(t).width+1,r=it(l);0===o&&(p+=r);const u="center"===e?rt(n.x,"x")-i/2:"left"===e?rt(n.x,"x"):rt(n.x,"x")-i;"transparent"!==c&&(a.fillStyle=c,a.fillRect(u,p,i,-r)),a.fillStyle=s,a.fillText(t,u,p),p+=r,h+=r}),a.restore(),at(h)}function pt(t,n){const e=_().G("vp"),{R:o}=e.I,s=e.height/n;o.save();const c=s+"px/1.2 monospace";o.font=c;const i=o.measureText(t),r=1.2*(i.actualBoundingBoxAscent?i.actualBoundingBoxAscent+i.actualBoundingBoxDescent:s);o.restore();const a=t.split("\n");return{font:c,total:at(r*a.length),B:1.2,q:at(r)}}function ft(){const t=window.innerWidth<window.innerHeight?window.innerWidth:.6*window.innerHeight,n=window.innerWidth<window.innerHeight?window.innerWidth/.6:window.innerHeight;return{L:"vp",ratio:.6,width:t,height:n,N:100,J:100/.6,I:function(t,n,e){const o=e.getContext("2d"),s=window.devicePixelRatio||1;return e.style.width=t+"px",e.style.height=n+"px",e.width=Math.round(t*s),e.height=Math.round(n*s),o.scale(s,s),o.webkitImageSmoothingEnabled=!1,o.msImageSmoothingEnabled=!1,o.mozImageSmoothingEnabled=!1,o.imageSmoothingEnabled=!1,{width:t,height:n,Z:e,R:o,K:s}}(t,n,et),O:{W:ct(50,50),mode:"center",target:ct(0,0)}}}function wt(){const t=ft(),n=_(),e=n.F(["vp"]);e&&n.j(e);nt.style.width=t.width+"px";const o=n=>Math.floor(n/t.N*t.I.Z.width);t.I.R.translate(o(t.O.W.x),o(t.O.W.y)),t.I.R.scale(1,-1);const s=[t];n.$(s)}function dt(t,n,e,o){const s=n.x-e.x,c=n.y-e.y,i=Math.sin(o),r=Math.cos(o);return t.x=s*r-c*i+e.x,t.y=s*i+c*r+e.y,t}function gt(){return{h:0,g:0,l:0,u:t(),p:t()}}window.addEventListener("resize",wt);const vt=t(),Mt=t(),yt=t();function xt(t,n){const{width:e,height:s}=function(t){return{width:t.N,height:Math.min(t.N,t.J)}}(n),c=t.width/2,r=t.height/2,a=n.O.target,l=ct(Math.cos(t.U),Math.sin(t.U)),u=i(ct(),l,Math.min(e/2,s/2)),h=o(ct(),a,u),p=ct(h.x,h.y-c),f=ct(h.x,h.y+c);return dt(p,p,h,t.U),dt(f,f,h,t.U),{x:h.x,y:h.y,angle:t.U,V:c,X:r,Y:p,p1:f}}function bt(t){const n=_().G("vp"),e=n.I.R,{x:o,y:s,angle:c,X:i,V:r,Y:a,p1:l}=xt(t,n);e.save(),e.fillStyle="rgba(255,255,255,1)",e.translate(rt(o,"x"),rt(s,"y")),e.rotate(Math.PI/2+c),e.fillRect(0-it(r),0-it(i),it(t.width),it(t.height)),e.restore(),function(t,n,e){mt(t,n.Y),mt(t,n.p1),t.save(),t.beginPath(),t.strokeStyle="black",t.lineWidth=it(.5),t.moveTo(rt(n.Y.x,"x"),rt(n.Y.y,"y")),t.lineTo(rt(n.p1.x,"x"),rt(n.p1.y,"y")),t.stroke(),t.restore()}(e,{Y:a,p1:l}),function(t,n,e){t.beginPath(),t.fillStyle="blue",t.arc(rt(n.i.x+(n.t.x-n.i.x)*e,"x"),rt(n.i.y+(n.t.y-n.i.y)*e,"y"),it(1),0,2*Math.PI),t.fill()}(e,t._,1)}function mt(t,n,e){t.save(),t.beginPath(),t.fillStyle="blue",t.arc(rt(n.x,"x"),rt(n.y,"y"),it(1),0,2*Math.PI),t.fill(),t.restore()}function kt(r,u,h){const p=ct(),f=O(function(t,n,e){return s(vt,n.t,n.i),l(Mt,vt),i(yt,Mt,e),o(t,yt,n.t),t}(ct(),r,u),r.i,h.tt,h.nt,p),w=gt();if(Q(r.i,h.tt,h.nt,w),f&&w.g>1){d=r,g=u,v={t:h.tt,i:h.tt,o:ct()},M={t:h.nt,i:h.nt,o:ct()},s(z,d.t,d.i),l(Z,z),i(q,Z,g),o(B,q,d.t),O(B,d.i,v.t,M.t,R)&&(s(W,B,R),s(d.t,d.t,W),s(d.i,d.i,W));const f=1,y=1e7,x=1,b=0,G=0,I=ct(),N=ct();((r,u,h,p,f,w,d,g,v,M,y,x,b,G,I)=>{e(m,0,0),e(k,0,0),e(T,0,0),e(E,0,0),e(L,0,0),e(S,0,0),e(A,0,0),e(H,0,0),e(P,0,0),e($,0,0),e(j,0,0),e(C,0,0),e(D,0,0),e(F,0,0),!b||0===b.x&&0===b.y?(s(m,r,d),l(m,m)):e(m,b.x,b.y),i(k,m,-1);const N=h+v,O=1+(p>M?p:M);s(T,r,u);const R=c(m,T);i(E,m,R),s(L,T,E),s(S,d,g);const W=c(k,S);i(A,k,W),s(H,S,A),i(j,E,(h-v)/N),i(C,A,O*v/N),o(P,j,C),o(P,P,L),i(D,E,O*h/N),i(F,A,(v-h)/N),o($,D,F),o($,$,H);const z=o(t(),P,$),Z=t();i(Z,m,c(z,m));const q=s(t(),z,Z);l(q,q);let B=-c(z,q);B/=1/(h+v);const J=Math.abs(B);if(J>1e-4){const n=a(L),e=a(H),s=t(),c=t();i(s,q,J<n*f?f:-n*w),i(c,q,J<e*y?y:-e*x),o(P,P,s),o($,$,c)}n(G,P),n(I,$)})(r.t,r.i,f,x,b,G,p,p,y,x,b,G,w.p,I,N),s(r.i,r.t,I)}var d,g,v,M}const Tt={et:0,ot:null,state:"boot",level:-1,st:{ct:null,it:null,target:null,rt:null},at:[]};function Et(t){const n=Tt;n.ot=n.state,n.state=t,n.et=0}function Lt(t){return t*X/1e3}function St(t){return t.toFixed(3)}const At={w:!1,a:!1,s:!1,d:!1,ArrowLeft:!1,ArrowRight:!1};function Ht(){return At}function Pt(t,n,e,o){const s=_().G("vp"),c=s.O.target,{W:i}=s.O,a=[[ct(c.x-i.x,c.y+i.y),ct(c.x+i.x,c.y+i.y),gt()],[ct(c.x+i.x,c.y+i.y),ct(c.x+i.x,c.y-i.y),gt()],[ct(c.x+i.x,c.y-i.y),ct(c.x-i.x,c.y-i.y),gt()],[ct(c.x-i.x,c.y-i.y),ct(c.x-i.x,c.y+i.y),gt()]];for(let n=0;n<a.length;n++){const[e,o,s]=a[n];Q(t,e,o,s)}const[[l,u,h],[p,f,w],[d,g,v],[M,y,x]]=a;let b,m,k;if(h.g>0&&w.g>0)b=ct(w.u.x,h.u.y),m=r(b,t),k="right";else if(w.g>0&&v.g>0)b=ct(w.u.x,v.u.y),m=r(b,t),k="right";else if(v.g>0&&x.g>0)b=ct(x.u.x,v.u.y),m=r(b,t),k="left";else if(x.g>0&&h.g>0)b=ct(x.u.x,h.u.y),m=r(b,t),k="left";else if(h.g>0)b=ct(Math.min(Math.max(h.u.x,l.x),u.x),h.u.y),m=h.h,k="center";else if(w.g>0)b=ct(w.u.x,Math.max(Math.min(p.y,w.u.y),f.y)),m=w.h,k="right";else if(v.g>0){const t=pt(o,44);b=ct(Math.max(Math.min(d.x,v.u.x),g.x),v.u.y+t.q),m=v.h,k="center"}else{if(!(x.g>0))return;b=ct(x.u.x,Math.min(Math.max(M.y,x.u.y),y.y)),m=x.h,k="left"}if(m<.7*((n.x/2+n.y/2)/2))return;const T=s.I.R;T.save(),ht(o,b,k,44,"black","yellow"),T.restore()}function $t(){const t=_().G("vp"),n={U:0,width:t.N/8,height:t.N/16,_:{o:ct(),t:ct(),i:ct()}},e={t:ct(),i:ct(),o:ct(),width:t.N/16,height:t.N/16},o={_:{t:ct(),i:ct(),o:ct()},lt:ct(10,10)};return u(ct(-10,-10),o._.t,o._.i),e.o.x=.1,e.o.y=.1,{it:e,ct:n,target:o,rt:null}}function jt(){const t=_().G("vp"),n={U:0,width:t.N/8,height:t.N/16,_:{o:ct(),t:ct(),i:ct()}},e={t:ct(),i:ct(),o:ct(),width:t.N/16,height:t.N/16},o={_:{t:ct(),i:ct(),o:ct()},lt:ct(10,10)};return u(ct(-30,-10),o._.t,o._.i),e.o.x=.1,e.o.y=.1,{it:e,ct:n,target:o,rt:null}}function Ct(){const t=_().G("vp"),n={U:0,width:t.N/8,height:t.N/16,_:{o:ct(),t:ct(),i:ct()}},e={t:ct(),i:ct(),o:ct(),width:t.N/16,height:t.N/16},o={_:{t:ct(),i:ct(),o:ct()},lt:ct(10,10)};u(ct(-10,-10),o._.t,o._.i),e.o.x=.5,e.o.y=.5;return{it:e,ct:n,target:o,rt:[{tt:ct(30,-10),nt:ct(30,40)},{tt:ct(20,50),nt:ct(-20,50)}]}}st(window,"keydown",t=>{At[t.key]=!0}),st(window,"keyup",t=>{At[t.key]=!1});function Dt(t,n){return!!((t,n,o,s,c,i,r,a,l)=>{const u=c-t,h=r/2+o/2-Math.abs(u),p=i-n,f=a/2+s/2-Math.abs(p);if(h<=0)return null;if(f<=0)return null;if(e(l.resolve,0,0),e(l.ut,0,0),e(l.ht,0,0),h<f){const n=u<0?-1:1;l.resolve.x=h*n,l.ht.x=n,l.ut.x=t+o/2*n,l.ut.y=i}else{const t=p<0?-1:1;l.resolve.y=f*t,l.ht.y=t,l.ut.x=c,l.ut.y=n+s/2*t}return l})(t._.t.x,t._.t.y,t.lt.x,t.lt.y,n.t.x,n.t.y,n.width,n.height,{resolve:ct(),ut:ct(),ht:ct()})}let Ft=0,Gt=[];const It=_(),Nt=It.$([{L:"fps",ft:60}]),Ot=t=>{ut(t.G("fps").ft.toFixed(2),ct(100,0),"right",44,"yellow")};function Rt(t){It.data(Nt,"fps").ft=t}function Wt(){}!async function(){await async function(){}();const e=_();wt();const s=[],c=[];s.push(t=>{lt()});const i=e.G("vp");s.push((function(t,n){switch(Tt.state){case"boot":break;case"level":{const{target:t,ct:e,it:o,rt:s}=Tt.st;if(!t||!e||!o)return;!function(){const{O:t,I:{R:n}}=_().G("vp"),e=Math.floor((t.target.x-t.W.x)/5),o=Math.floor((t.target.x+t.W.x)/5),s=Math.floor((t.target.y+t.W.y)/5),c=Math.floor((t.target.y-t.W.y)/5);n.fillStyle="black",n.fillRect(rt(t.target.x-t.W.x,"x"),rt(t.target.y+t.W.y,"y"),it(2*t.W.x),it(2*-t.W.y)),n.strokeStyle="gray";for(let s=e;s<=o;s++){const e=rt(5*s,"x"),o=rt(t.target.y+t.W.y,"y"),c=rt(t.target.y-t.W.y,"y");n.beginPath(),n.moveTo(e,o),n.lineTo(e,c),n.stroke()}for(let e=c+1;e<=s;e++){const o=rt(5*e,"y"),s=rt(t.target.x-t.W.x,"x"),c=rt(t.target.x+t.W.x,"x");n.beginPath(),n.moveTo(s,o),n.lineTo(c,o),n.stroke()}}(),function(t,n){const e=_().G("vp").I.R,{x:o,y:s}=t._.t,c=t.lt.x/2,i=t.lt.y/2;e.save(),e.fillStyle="rgba(128,255,255,1)",e.translate(rt(o,"x"),rt(s,"y")),e.fillRect(0-it(c),0-it(i),it(t.lt.x),it(t.lt.y)),e.restore()}(t),bt(e),function(t,n){const e=_().G("vp").I.R,{t:o,i:s,width:c,height:i}=t,r=c/2,a=i/2,l=rt(s.x+n*(o.x-s.x),"x"),u=rt(s.y+n*(o.y-s.y),"y"),h=it(c),p=it(i);e.save(),e.fillStyle="rgba(255,255,255,1)",e.fillRect(l-it(r),u-it(a),h,p),e.restore()}(o,n),s&&function(t){const{I:{R:n}}=_().G("vp");n.save(),n.strokeStyle="red",n.lineWidth=it(1);for(let e=0;e<t.length;e++){const o=t[e];n.beginPath(),n.moveTo(rt(o.tt.x,"x"),rt(o.tt.y,"y")),n.lineTo(rt(o.nt.x,"x"),rt(o.nt.y,"y")),n.closePath(),n.stroke()}n.restore()}(s),function(t,n){const e=_().G("vp");ut(St(Lt(t.et)),ct(e.N/2,0),"center",44,"yellow"),ut(`Level ${t.level+1} of ??`,ct(0,0),"left",44,"yellow"),t.st.target&&Pt(t.st.target._.t,t.st.target.lt,0,"TARGET"),t.st.it&&Pt(t.st.it.t,ct(t.st.it.width,t.st.it.height),0,"SIGNAL")}(Tt);break}case"win":{const n=t.G("vp");ut(`Mission\nCompleted!\n${St(Lt(Tt.at[Tt.level]))}s`,ct(n.N/2,-10),"center",15,"yellow");break}case"nextlevel":break;case"thanks":ut(`The SIGNAL\nmade it,\nthanks to you!\nTotal:\n${St(Lt(Tt.at.reduce((t,n)=>t+=n,0)))}s`,ct(t.G("vp").N/2,-10),"center",15,"yellow"),console.log("thanks!");break}})),c.push((e,s)=>{switch(Tt.state){case"boot":return console.log("boot"),Et("nextlevel");case"level":{if(0===Tt.et){const t=[$t,jt,Ct][Tt.level];if(!t)return Et("thanks");Tt.st=t()}const{target:t,ct:n,it:e}=Tt.st,s=Ht();s.ArrowLeft&&(n.U+=.2),s.ArrowRight&&function(t){t.U-=.2}(n);const c=ct(.2,0),i=ct();let r=0;if(s.w&&s.d?r=Math.PI/4:s.w&&s.a?r=Math.PI*(3/4):s.s&&s.d?r=-Math.PI/4:s.s&&s.a?r=-Math.PI*(3/4):s.w?r=Math.PI/2:s.a?r=Math.PI:s.s?r=-Math.PI/2:s.d&&(r=0),(0!==r||s.d)&&function(t,n){o(t._.o,t._.o,n)}(n,dt(ct(),c,i,r)),Dt(t,e)){const t=Tt;return t.at[t.level]=t.et,Et("win")}break}case"win":0===Tt.et&&(c=()=>Et("nextlevel"),r=5e3,Gt.push({id:++Ft,action:c,delay:r,wt:0}));break;case"nextlevel":{const t=Tt;return t.level+=1,t.st.it=null,t.st.ct=null,t.st.target=null,Et("level")}}var c,r;const{target:a,ct:l,it:u,rt:p}=Tt.st;a&&l&&u&&(((t,n)=>{const e=(t.i.x-t.t.x)*n,o=(t.i.y-t.t.y)*n;t.i.x=t.t.x+e,t.i.y=t.t.y+o})(l._,.8),h(l._,s),G(l._),function(e,o,s,c){h(e,c);const{Y:i,p1:r}=xt(o,s),a={t:i,i:n(t(),i),o:t()},l={t:r,i:n(t(),r),o:t()};b(e,2,1,a,-1,l,-1,!1,1),G(e),b(e,1,1,a,-1,l,-1,!0,1)}(u,l,i,s),p&&function(t,n){for(let e=0;e<t.length;e++){const o=t[e];kt(n,n.width,o)}}(p,u),function(t){const e=_().G("vp");n(e.O.target,t)}(l._.t)),Tt.et+=1}),s.push(Ot);const{stop:r}=(({dt:t,gt:n,vt:e,update:o,Mt:s=10,yt:c=(()=>{}),xt:i=(()=>{})})=>{const r=window.performance,a=t,l=n,u=r.now.bind(r),h=window.requestAnimationFrame.bind(window);let p=0,f=null,w=u(),d=u(),g=0,v=60;return function t(){const n=u();f=h(t),p+=n-w,w=n;let r=p-a>=0,M=Math.floor(p/l);if(M>=s)return p=0,w=u(),void c();for(;M-- >0;)p-=l,o(l);r&&e(p/a),g+=1,d+1e3<=n&&(v=.25*g+.75*v,g=0,d=n,i(v))}(),{stop:()=>{f&&cancelAnimationFrame(f)}}})({dt:16.6666666,gt:X,update:t=>{((t=1)=>{Gt.slice().forEach((n,e)=>{n.wt+=t,n.wt>=n.delay&&(Gt.splice(e,1),n.action(n.delay,n.wt))})})(t),c.forEach(n=>n(e,t)),e.D()},vt:t=>{s.forEach(n=>n(e,t))},yt:Wt,xt:Rt})}()}();