!function(){"use strict";function t(t,n){return{x:t||0,y:n||0}}const n=(t,n)=>(t.x=n.x,t.y=n.y,t),e=(t,n,e)=>(t.x=n,t.y=e,t),o=(t,n,e)=>(t.x=n.x+e.x,t.y=n.y+e.y,t),c=(t,n,e)=>(t.x=n.x-e.x,t.y=n.y-e.y,t),s=(t,n)=>t.x*n.x+t.y*n.y,i=(t,n,e)=>(t.x=n.x*e,t.y=n.y*e,t),r=(t,n)=>{const e=t.x-n.x,o=t.y-n.y;return Math.sqrt(e*e+o*o)},a=t=>{const n=t.x,e=t.y;return Math.sqrt(n*n+e*e)},l=(t,n)=>{const e=n.x,o=n.y;let c=e*e+o*o;return c>0&&(c=1/Math.sqrt(c),t.x=n.x*c,t.y=n.y*c),t},h=(t,...n)=>{for(let e=0;e<n.length;e++){const c=n[e];o(c,c,t)}},u=(t,n)=>{t.t.x+=t.o.x*n*n*.001,t.t.y+=t.o.y*n*n*.001,e(t.o,0,0)},f=t(),p=t(),d=t(),w=t(),g=t(),M=t(),v=t(),b=t(),x=t(),y=t(),m=t(),k=t(),A=t(),S=t(),L=(r,h,u,L,T,H,P,D,j,F,C,E,K,N,R)=>{e(f,0,0),e(p,0,0),e(d,0,0),e(w,0,0),e(g,0,0),e(M,0,0),e(v,0,0),e(b,0,0),e(x,0,0),e(y,0,0),e(m,0,0),e(k,0,0),e(A,0,0),e(S,0,0),!K||0===K.x&&0===K.y?(c(f,r,P),l(f,f)):e(f,K.x,K.y),i(p,f,-1);const W=u+j,G=1+(L>F?L:F);c(d,r,h);const I=s(f,d);i(w,f,I),c(g,d,w),c(M,P,D);const O=s(p,M);i(v,p,O),c(b,M,v),i(m,w,(u-j)/W),i(k,v,G*j/W),o(x,m,k),o(x,x,g),i(A,w,G*u/W),i(S,v,(j-u)/W),o(y,A,S),o(y,y,b);const $=o(t(),x,y),z=t();i(z,f,s($,f));const U=c(t(),$,z);l(U,U);let Z=-s($,U);Z/=1/(u+j);const q=Math.abs(Z);if(q>1e-4){const n=a(g),e=a(b),c=t(),s=t();i(c,U,q<n*T?T:-n*H),i(s,U,q<e*C?C:-e*E),o(x,x,c),o(y,y,s)}n(N,x),n(R,y)},T=t=>{const n=2*t.t.x-t.i.x,o=2*t.t.y-t.i.y;e(t.i,t.t.x,t.t.y),e(t.t,n,o)},H=t(),P=t();function D(t,n,e,o,s){c(H,n,t),c(P,o,e);const i=(-H.y*(t.x-e.x)+H.x*(t.y-e.y))/(-P.x*H.y+H.x*P.y),r=(P.x*(t.y-e.y)-P.y*(t.x-e.x))/(-P.x*H.y+H.x*P.y);return i>=0&&i<=1&&r>=0&&r<=1&&(s.x=t.x+r*H.x,s.y=t.y+r*H.y,!0)}const j=t(),F=t(),C=t(),E=t(),K=t(),N=t();const R=t(),W=t();function G(t,n,o,i){if(c(R,o,n),0===R.x&&0===R.y)throw new Error("ZeroLengthEdge");const a=((t.x-n.x)*R.x+(t.y-n.y)*R.y)/(R.x*R.x+R.y*R.y);i.l=a;const h=e(i.h,n.x+a*R.x,n.y+a*R.y);i.u=r(h,t);const u=((t,n,e)=>(t.y=e.x-n.x,t.x=n.y-e.y,l(t,t)))(i.p,n,o);c(W,t,h),i.g=s(u,W)}function I(t){return t&&"object"==typeof t&&"number"==typeof t.id}class O{constructor(t){this.M=t,this.v=O.hash(this.M),this.m=new Set}k(t){this.m.add(t)}A(t,n){const e=n.map(t=>t.S);this.M.every(t=>e.indexOf(t)>-1)&&!this.m.has(t)&&this.m.add(t)}L(t,n){const e=n.map(t=>t.S);this.M.every(t=>e.indexOf(t)>-1)&&this.m.has(t)&&this.m.delete(t)}static hash(t){return t.slice().sort().join("|")}}const $=33.3333333,z=new class{constructor(){this.T=1,this.m=new Map,this.H=new Map,this.P=new Set}D(t){const n={id:this.T++};return this.m.set(n,t),this.H.forEach(e=>e.A(n,t)),n}j(t){this.P.add(t)}F(t){return this.P.has(t)}C(){if(0===this.P.size)return;let t=!1;const n=e=>{e&&"object"==typeof e&&!I(e)&&Object.values(e).forEach(e=>{I(e)?(this.j(e),t=!0):n(e)})};this.P.forEach(t=>{if(this.P.delete(t),!this.m.has(t))return;const e=this.m.get(t);e.forEach(t=>{n(t)}),this.m.delete(t),this.H.forEach(n=>n.L(t,e))}),t&&this.C()}select(t){const n=O.hash(t);if(this.H.has(n))return this.H.get(n).m;const e=new O(t);return this.H.set(e.v,e),this.m.forEach((n,o)=>{let c=!0;for(let e=0;e<t.length;e++){const o=t[e];n.find(t=>t.S===o)||(c=!1)}c&&e.k(o)}),e.m}K(t){return this.select(t).values().next().value}data(t,n){const e=this.m.get(t);let o;for(let t=0;t<e.length;t++){const c=e[t];c.S===n&&(o=c)}return o}N(t){const n=this.K([t]);if(!n)return;return this.data(n,t)}};function U(){return z}function Z(t,n,e){const o=e.getContext("2d"),c=window.devicePixelRatio||1;return e.style.width=t+"px",e.style.height=n+"px",e.width=Math.round(t*c),e.height=Math.round(n*c),o.scale(c,c),o.webkitImageSmoothingEnabled=!1,o.msImageSmoothingEnabled=!1,o.mozImageSmoothingEnabled=!1,o.imageSmoothingEnabled=!1,{width:t,height:n,R:e,W:o,G:c}}const q=document.querySelector.bind(document),B=q("#r"),J=q("#c"),Q=q("#u");if(!B||!J||!Q)throw new Error("Could not locate DOM!");function V(t,n,e,o){return t.addEventListener(n,e,o),()=>{t.removeEventListener(n,e,o)}}function X(n=0,e=0){return t(n,e)}function Y(t){const n=U().N("vp"),e=n.I;return t/n.O*e.width}function _(t,n){const e=U().N("vp"),{$:o}=e;return Y(t-("x"===n?o.target.x:o.target.y))}const tt=t=>t/U().N("vp").I.width*100;function nt(){const t=U().N("vp"),{W:n}=t.I;n.save(),function(t){const{W:n}=t.I,{$:e}=t;n.scale(1,-1),n.translate(-Y(e.U.x),-Y(e.U.y))}(t),n.clearRect(0,0,t.I.R.width,t.I.R.height),n.restore()}function et(t,n,e,c,s){const i=U().N("vp"),{$:r}=i,a=X();return a.x=r.target.x-r.U.x,a.y=r.target.y+r.U.y,o(a,a,n),ot(t,a,e,c,s)}function ot(t,n,e,o,c,s="transparent"){const i=U().N("vp"),{$:r}=i,{W:a}=i.I;a.save(),a.scale(1,-1);const{Z:l,font:h}=ct(t,o);let u=0,f=Y(-n.y+r.target.y);return a.font=h,t.split("\n").forEach((t,o)=>{const i=a.measureText(t).width+1,r=Y(l);0===o&&(f+=r);const h="center"===e?_(n.x,"x")-i/2:"left"===e?_(n.x,"x"):_(n.x,"x")-i;"transparent"!==s&&(a.fillStyle=s,a.fillRect(h,f,i,-r)),a.fillStyle=c,a.fillText(t,h,f),f+=r,u+=r}),a.restore(),tt(u)}function ct(t,n){const e=U().N("vp"),{W:o}=e.I,c=e.height/n;o.save();const s=c+"px/1.2 monospace";o.font=s;const i=o.measureText(t),r=1.2*(i.actualBoundingBoxAscent?i.actualBoundingBoxAscent+i.actualBoundingBoxDescent:c);o.restore();const a=t.split("\n");return{font:s,total:tt(r*a.length),q:1.2,Z:tt(r)}}function st(){const t=window.innerWidth<window.innerHeight?window.innerWidth:.6*window.innerHeight,n=window.innerWidth<window.innerHeight?window.innerWidth/.6:window.innerHeight;return{S:"vp",ratio:.6,width:t,height:n,O:100,B:100/.6,I:Z(t,n,J),$:{U:X(50,50),mode:"center",target:X(0,0)}}}function it(){const t=st(),n=U(),e=n.K(["vp"]);e&&n.j(e);B.style.width=t.width+"px";const o=n=>Math.floor(n/t.O*t.I.R.width);t.I.W.translate(o(t.$.U.x),o(t.$.U.y)),t.I.W.scale(1,-1);const c=[t];n.D(c)}function rt(t,n,e,o){const c=n.x-e.x,s=n.y-e.y,i=Math.sin(o),r=Math.cos(o);return t.x=c*r-s*i+e.x,t.y=c*i+s*r+e.y,t}function at(){return{u:0,g:0,l:0,h:t(),p:t()}}window.addEventListener("resize",it);const lt=t(),ht=t(),ut=t();function ft(t){return Math.atan2(t.y,t.x)}function pt(t,n){const{width:e,height:c}=function(t){return{width:t.O,height:Math.min(.75*t.O,.75*t.B)}}(n),s=t.width/2,r=t.height/2,a=n.$.target,l=X(Math.cos(t.J),Math.sin(t.J)),h=i(X(),l,Math.min(e/2,c/2)),u=o(X(),a,h),f=X(u.x,u.y-s),p=X(u.x,u.y+s);return rt(f,f,u,t.J),rt(p,p,u,t.J),{x:u.x,y:u.y,angle:t.J,V:s,X:r,Y:f,p1:p}}const dt=new URLSearchParams(window.location.search).get("seed"),wt=dt?Number(dt):Date.now(),gt=(vt=61^(vt=wt)^vt>>>16,vt+=vt<<3,vt=Math.imul(vt,668265261),Mt=(vt^=vt>>>15)>>>0,t=>(Mt=Mt+1831565813|0,(((t=(t=Math.imul(Mt^Mt>>>15,1|Mt))+Math.imul(t^t>>>7,61|t)^t)^t>>>14)>>>0)/2**32));var Mt,vt;const bt=()=>gt();let xt;function yt(t,n,e){const s=X(),r=D(function(t,n,e){return c(lt,n.t,n.i),l(ht,lt),i(ut,ht,e),o(t,ut,n.t),t}(X(),t,n),t.i,e._,e.tt,s),a=at();if(G(t.i,e._,e.tt,a),r&&a.g>1){h=t,u=n,f={t:e._,i:e._,o:X()},p={t:e.tt,i:e.tt,o:X()},c(C,h.t,h.i),l(E,C),i(K,E,u),o(N,K,h.t),D(N,h.i,f.t,p.t,j)&&(c(F,N,j),c(h.t,h.t,F),c(h.i,h.i,F));const r=1,d=1e7,w=1,g=0,M=0,v=X(),b=X();L(t.t,t.i,r,w,g,M,s,s,d,w,g,M,a.p,v,b),c(t.i,t.t,v)}var h,u,f,p}const mt={nt:0,et:null,state:"boot",level:-1,ot:{ct:null,st:null,target:null,it:null,rt:null},at:[]};function kt(t){const n=mt;n.et=n.state,n.state=t,n.nt=0}function At(t){return t*$/1e3}function St(t){return t.toFixed(3)}const Lt={KeyW:!1,KeyA:!1,KeyS:!1,KeyD:!1,ArrowLeft:!1,ArrowRight:!1,ShiftLeft:!1};function Tt(){return Lt}function Ht(t,n,e,o){const c=U().N("vp"),s=c.$.target,{U:i}=c.$,a=[[X(s.x-i.x,s.y+i.y),X(s.x+i.x,s.y+i.y),at()],[X(s.x+i.x,s.y+i.y),X(s.x+i.x,s.y-i.y),at()],[X(s.x+i.x,s.y-i.y),X(s.x-i.x,s.y-i.y),at()],[X(s.x-i.x,s.y-i.y),X(s.x-i.x,s.y+i.y),at()]];for(let n=0;n<a.length;n++){const[e,o,c]=a[n];G(t,e,o,c)}const[[l,h,u],[f,p,d],[w,g,M],[v,b,x]]=a;let y,m,k;const A=ct(o,44);if(u.g>0&&d.g>0)y=X(d.h.x,u.h.y),m=r(y,t),k="right";else if(d.g>0&&M.g>0)y=X(d.h.x,M.h.y+A.Z),m=r(y,t),k="right";else if(M.g>0&&x.g>0)y=X(x.h.x,M.h.y+A.Z),m=r(y,t),k="left";else if(x.g>0&&u.g>0)y=X(x.h.x,u.h.y),m=r(y,t),k="left";else if(u.g>0)y=X(Math.min(Math.max(u.h.x,l.x),h.x),u.h.y),m=u.u,k="center";else if(d.g>0)y=X(d.h.x,Math.max(Math.min(f.y,d.h.y),p.y)),m=d.u,k="right";else if(M.g>0)y=X(Math.max(Math.min(w.x,M.h.x),g.x),M.h.y+A.Z),m=M.u,k="center";else{if(!(x.g>0))return;y=X(x.h.x,Math.min(Math.max(v.y,x.h.y),b.y)),m=x.u,k="left"}if(m<.7*((n.x/2+n.y/2)/2))return;const S=c.I.W;S.save(),ot(o,y,k,44,"rgba(40,40,40,1)","rgba(255,255,132,1)"),S.restore()}function Pt(){const t=U().N("vp"),n={J:0,width:t.O/2,height:t.O/16,lt:{o:X(),t:X(),i:X()}},e={t:X(),i:X(),o:X(),width:t.O/16,height:t.O/16},o={lt:{t:X(),i:X(),o:X()},ht:X(10,10)};h(X(-10,-10),o.lt.t,o.lt.i),e.o.x=.1,e.o.y=.1;const c={lt:{t:X(),i:X(),o:X()},ht:X(10,10),ut:X(1,1)};return h(X(10,-10),c.lt.i,c.lt.t),{st:e,ct:n,target:o,it:null,rt:[c]}}function Dt(){const t=U().N("vp"),n={J:0,width:t.O/8,height:t.O/16,lt:{o:X(),t:X(),i:X()}},e={t:X(),i:X(),o:X(),width:t.O/16,height:t.O/16},o={lt:{t:X(),i:X(),o:X()},ht:X(10,10)};return h(X(-30,-10),o.lt.t,o.lt.i),e.o.x=.1,e.o.y=.1,{st:e,ct:n,target:o,it:null,rt:null}}function jt(){const t=U().N("vp"),n={J:0,width:t.O/8,height:t.O/16,lt:{o:X(),t:X(),i:X()}},e={t:X(),i:X(),o:X(),width:t.O/16,height:t.O/16},o={lt:{t:X(),i:X(),o:X()},ht:X(10,10)};h(X(-10,-10),o.lt.t,o.lt.i),e.o.x=.5,e.o.y=.5;return{st:e,ct:n,target:o,it:[{_:X(30,-10),tt:X(30,40)},{_:X(20,50),tt:X(-20,50)}],rt:null}}V(window,"keydown",t=>{Lt[t.code]=!0}),V(window,"keyup",t=>{Lt[t.code]=!1});function Ft(t,n){return!!((t,n,o,c,s,i,r,a,l)=>{const h=s-t,u=r/2+o/2-Math.abs(h),f=i-n,p=a/2+c/2-Math.abs(f);if(u<=0)return null;if(p<=0)return null;if(e(l.resolve,0,0),e(l.ft,0,0),e(l.dt,0,0),u<p){const n=h<0?-1:1;l.resolve.x=u*n,l.dt.x=n,l.ft.x=t+o/2*n,l.ft.y=i}else{const t=f<0?-1:1;l.resolve.y=p*t,l.dt.y=t,l.ft.x=s,l.ft.y=n+c/2*t}return l})(t.lt.t.x,t.lt.t.y,t.ht.x,t.ht.y,n.t.x,n.t.y,n.width,n.height,{resolve:X(),ft:X(),dt:X()})}let Ct=0,Et=[];const Kt=U(),Nt=Kt.D([{S:"fps",wt:60}]),Rt=t=>{et(t.N("fps").wt.toFixed(2),X(100,0),"right",44,"rgba(255,255,132,1)")};function Wt(t){Kt.data(Nt,"fps").wt=t}function Gt(t){const n=U().N("vp"),e=n.I.W,{x:o,y:c}=t.lt.t,s=t.ht.x/2,i=t.ht.x/4,r=n.O/64,a=t.ht.y/r,l=s*Math.SQRT2,h=r*Math.SQRT2/2;e.save(),e.fillStyle="rgba(255,255,132,1)",e.strokeStyle="rgba(255,255,132,1)";const u=ft(t.ut);e.translate(_(o,"x"),_(c,"y")),e.rotate(u-Math.PI/2),It(e,a,r,l,0,0-i+h,Math.PI/4),It(e,a,r,l,0,0+i-h,-Math.PI/4),e.restore()}function It(t,n,e,o,c,s,i){for(let r=0;r<n;r+=2){t.save(),t.translate(Y(s),Y(c+r*e)),t.rotate(i);(r<Math.floor(n/4)?t.strokeRect:t.fillRect).call(t,Y(0-o/2),Y(0),Y(o),Y(e)),t.restore()}}function Ot(n,e){const o=e.lt.t,s=(e.ht.y,e.ht.x/2),r=X(o.x,o.y+s),a=X(o.x,o.y-s),h=ft(e.ut);rt(r,r,o,h),rt(a,a,o,h);const u=X(),f=D(n.i,n.t,r,a,u),p=at();G(n.i,r,a,p),f&&p.g<0&&(console.log("entered accelerator!"),function(n,e){const o=c(t(),n.t,n.i),s=l(o,o),r=i(s,s,e);c(n.i,n.t,r)}(n,5))}function $t(){}!async function(){await async function(){}();const t=U();it();const e=[],s=[];e.push(t=>{nt()});const r=t.N("vp");e.push((function(t,n){switch(mt.state){case"boot":break;case"level":{const{target:t,ct:n,st:e,it:o,rt:c}=mt.ot;if(!t||!n||!e)return;!function(){const t=U().N("vp"),{$:n}=t,e=2*n.U.x,o=2*n.U.y;if(!xt){const n=document.createElement("canvas"),c=n.getContext("2d");xt=Z(Y(2*t.$.U.x),Y(2*t.$.U.y),n);const s=.1,i=.3,r=2*t.$.U.y*8;c.fillStyle="rgba(255,255,132,1)";let a=0;for(;a<r;){const t=bt()*e,n=bt()*o,r=bt()*(i-s)+s;c.beginPath(),c.arc(Y(t),Y(n),Y(r),0,2*Math.PI,!1),c.fill(),a++}}const c=n.target.x/e,s=n.target.y/o,i=Math.floor(c),r=Math.floor(s);let a=n.target.x%e/e,l=n.target.y%o/o;a=n.target.x<0?1-Math.abs(a):a,l=n.target.y<0?1-Math.abs(l):l;const h=t.I.W;h.fillStyle="rgba(40,40,40,1)",h.fillRect(_(n.target.x-n.U.x,"x"),_(n.target.y+n.U.y,"y"),Y(2*n.U.x),Y(2*-n.U.y)),h.drawImage(xt.R,0,0,Y(e),Y(o),_(i*e,"x"),_(r*o,"y"),Y(e),Y(o)),a<.5&&h.drawImage(xt.R,0,0,Y(e),Y(o),_((i-1)*e,"x"),_(r*o,"y"),Y(e),Y(o)),a>=.5&&h.drawImage(xt.R,0,0,Y(e),Y(o),_((i+1)*e,"x"),_(r*o,"y"),Y(e),Y(o)),l<.5&&h.drawImage(xt.R,0,0,Y(e),Y(o),_(i*e,"x"),_((r-1)*o,"y"),Y(e),Y(o)),l>=.5&&h.drawImage(xt.R,0,0,Y(e),Y(o),_(i*e,"x"),_((r+1)*o,"y"),Y(e),Y(o)),a<.5&&l<.5&&h.drawImage(xt.R,0,0,Y(e),Y(o),_((i-1)*e,"x"),_((r-1)*o,"y"),Y(e),Y(o)),a>=.5&&l<.5&&h.drawImage(xt.R,0,0,Y(e),Y(o),_((i+1)*e,"x"),_((r-1)*o,"y"),Y(e),Y(o)),a<.5&&l>=.5&&h.drawImage(xt.R,0,0,Y(e),Y(o),_((i-1)*e,"x"),_((r+1)*o,"y"),Y(e),Y(o)),a>=.5&&l>=.5&&h.drawImage(xt.R,0,0,Y(e),Y(o),_((i+1)*e,"x"),_((r+1)*o,"y"),Y(e),Y(o))}(),function(t,n){const e=U().N("vp").I.W,{x:o,y:c}=t.lt.t,s=t.ht.x/2,i=t.ht.y/2;e.save(),e.fillStyle="rgba(128,255,255,1)",e.translate(_(o,"x"),_(c,"y")),e.fillRect(0-Y(s),0-Y(i),Y(t.ht.x),Y(t.ht.y)),e.restore()}(t),function(t){const n=U().N("vp"),e=n.I.W,{x:o,y:c,angle:s,X:i,V:r,Y:a,p1:l}=pt(t,n);e.save(),e.fillStyle="rgba(255,255,255,1)",e.translate(_(o,"x"),_(c,"y")),e.rotate(Math.PI/2+s),e.fillRect(0-Y(r),0-Y(i),Y(t.width),Y(t.height)),e.restore()}(n),function(t,n){const e=U().N("vp").I.W,{t:o,i:c,width:s,height:i}=t,r=s/2,a=i/2,l=_(c.x+1*(o.x-c.x),"x"),h=_(c.y+1*(o.y-c.y),"y"),u=Y(s),f=Y(i);e.save(),e.fillStyle="rgba(255,255,255,1)",e.fillRect(l-Y(r),h-Y(a),u,f),e.restore()}(e),c&&function(t){for(let n=0;n<t.length;n++)Gt(t[n])}(c),o&&function(t){const{I:{W:n}}=U().N("vp");n.save(),n.strokeStyle="red",n.lineWidth=Y(1);for(let e=0;e<t.length;e++){const o=t[e];n.beginPath(),n.moveTo(_(o._.x,"x"),_(o._.y,"y")),n.lineTo(_(o.tt.x,"x"),_(o.tt.y,"y")),n.closePath(),n.stroke()}n.restore()}(o),function(t,n){const e=U().N("vp");et(St(At(t.nt)),X(e.O/2,0),"center",44,"rgba(255,255,132,1)"),et(`Level ${t.level+1} of ??`,X(0,0),"left",44,"rgba(255,255,132,1)"),t.ot.target&&Ht(t.ot.target.lt.t,t.ot.target.ht,0,"TARGET"),t.ot.st&&Ht(t.ot.st.t,X(t.ot.st.width,t.ot.st.height),0,"SIGNAL")}(mt);break}case"win":{const n=t.N("vp");et(`Mission\nCompleted!\n${St(At(mt.at[mt.level]))}s`,X(n.O/2,-10),"center",15,"rgba(255,255,132,1)");break}case"nextlevel":break;case"thanks":et(`The SIGNAL\nmade it,\nthanks to you!\nTotal:\n${St(At(mt.at.reduce((t,n)=>t+=n,0)))}s`,X(t.N("vp").O/2,-10),"center",15,"rgba(255,255,132,1)"),console.log("thanks!");break}!function(t="rgba(40,40,40,1)"){const n=U().N("vp"),{W:e}=n.I;e.fillStyle=t;const o=2*n.$.U.x,c=n.B-2*n.$.U.y;e.fillRect(_(n.$.target.x-n.$.U.x,"x"),_(n.$.target.y-n.$.U.y,"y"),Y(o),Y(-c))}()})),s.push((t,e)=>{switch(mt.state){case"boot":return console.log("boot"),kt("nextlevel");case"level":{if(0===mt.nt){const t=[Pt,Dt,jt][mt.level];if(!t)return kt("thanks");mt.ot=t()}const{target:t,ct:n,st:e}=mt.ot,c=Tt();c.ArrowLeft&&(n.J+=.2),c.ArrowRight&&function(t){t.J-=.2}(n);const s=c.ShiftLeft?X(1,0):X(.2,0),i=X();let r=0;if(c.KeyW&&c.KeyD?r=Math.PI/4:c.KeyW&&c.KeyA?r=Math.PI*(3/4):c.KeyS&&c.KeyD?r=-Math.PI/4:c.KeyS&&c.KeyA?r=-Math.PI*(3/4):c.KeyW?r=Math.PI/2:c.KeyA?r=Math.PI:c.KeyS?r=-Math.PI/2:c.KeyD&&(r=0),(0!==r||c.KeyD)&&function(t,n){o(t.lt.o,t.lt.o,n)}(n,rt(X(),s,i,r)),Ft(t,e)){const t=mt;return t.at[t.level]=t.nt,kt("win")}break}case"win":0===mt.nt&&(s=()=>kt("nextlevel"),a=5e3,Et.push({id:++Ct,action:s,delay:a,gt:0}));break;case"nextlevel":{const t=mt;return t.level+=1,t.ot.st=null,t.ot.ct=null,t.ot.target=null,kt("level")}}var s,a;const{target:l,ct:f,st:p,it:d,rt:w}=mt.ot;l&&f&&p&&(((t,n)=>{const e=(t.i.x-t.t.x)*n,o=(t.i.y-t.t.y)*n;t.i.x=t.t.x+e,t.i.y=t.t.y+o})(f.lt,.8),u(f.lt,e),function(t,e,o,s){u(t,s);const{Y:r,p1:a,X:l}=pt(e,o),f={_:r,tt:a},p=t,d=l,w=at();G(p.t,f._,f.tt,w);const g=n(X(),w.h),M=c(X(),e.lt.t,e.lt.i),v=c(X(),g,M),b=2+d;if(w.l>=0&&w.l<=1&&w.u<=b&&w.g>0){const t=1,n=1e7,e=.5,o=.87,s=.87,r=X(),a=X();L(p.t,p.i,t,e,o,s,g,v,n,e,o,s,w.p,r,a),c(p.i,p.t,r);const l=Math.abs(b-w.u),u=i(X(),w.p,l);h(u,p.t,p.i)}T(t)}(p,f,r,e),w&&function(t,n){for(let e=0;e<n.length;e++)Ot(t,n[e])}(p,w),d&&function(t,n){for(let e=0;e<t.length;e++){const o=t[e];yt(n,n.width,o)}}(d,p),T(f.lt),function(t){const e=U().N("vp");n(e.$.target,t)}(f.lt.t)),mt.nt+=1}),e.push(Rt);const{stop:a}=(({Mt:t,vt:n,bt:e,update:o,xt:c=10,yt:s=(()=>{}),kt:i=(()=>{})})=>{const r=window.performance,a=t,l=n,h=r.now.bind(r),u=window.requestAnimationFrame.bind(window);let f=0,p=null,d=h(),w=h(),g=0,M=60;return function t(){const n=h();p=u(t),f+=n-d,d=n;let r=f-a>=0,v=Math.floor(f/l);if(v>=c)return f=0,d=h(),void s();for(;v-- >0;)f-=l,o(l);r&&e(f/a),g+=1,w+1e3<=n&&(M=.25*g+.75*M,g=0,w=n,i(M))}(),{stop:()=>{p&&cancelAnimationFrame(p)}}})({Mt:16.6666666,vt:$,update:n=>{((t=1)=>{Et.slice().forEach((n,e)=>{n.gt+=t,n.gt>=n.delay&&(Et.splice(e,1),n.action(n.delay,n.gt))})})(n),s.forEach(e=>e(t,n)),t.C()},bt:n=>{e.forEach(e=>e(t,n))},yt:$t,kt:Wt})}()}();